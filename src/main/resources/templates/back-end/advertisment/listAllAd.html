<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>所有廣告資料 - listAllAd.html</title>

<head th:insert="~{/back-end/ad/included-fragment}"></head>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.jqueryui.min.css" />

<script>
	$(document).ready(function() {
		$('#example').DataTable({
			"lengthMenu": [3 ,5, 10, 20, 50, 100], // 每頁顯示筆數的選項
			"searching": true,  // 搜尋功能, 預設是開啟
		    "paging": true,     // 分頁功能, 預設是開啟
		    "ordering": true,   // 排序功能, 預設是開啟
		    "language": {
                "processing": "處理中...",
                "lengthMenu": "顯示 _MENU_ 項結果",
                "zeroRecords": "沒有符合的結果",
                "info": "顯示第 _START_ 至 _END_ 項結果，共 _TOTAL_ 項",
                "infoEmpty": "顯示第 0 至 0 項結果，共 0 項",
                "infoFiltered": "(從 _MAX_ 項結果中過濾)",
                "infoPostFix": "",
                "search": "搜尋:",
                "paginate": {
                    "first": "首頁",
                    "previous": "上一頁",
                    "next": "下一頁",
                    "last": "末頁"
                },
                "aria": {
                    "sortAscending": ": 升序排列",
                    "sortDescending": ": 降序排列"
                }
            }
		});
	});
</script>

<style>
  table {
	width: 100%;
	margin: 0 auto;
	}
</style>

</head>
<body>

<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top justify-content-between">
    <a class="navbar-brand" th:href="@{/advertisment/select_page}">
        <img th:src="@{/images/back1.gif}">回查詢頁
        <label th:text="${success}" style="color: yellow;"></label> </a>
</nav>

<div class="container-fluid" style="margin-top: 80px;">
    <h2 class="text-center">所有廣告資料</h2>
    <div th:replace="~{/back-end/ad/select_page :: select_page_div}"></div>

    <table id="example" class="display" style="width: 100%">
        <thead>
            <tr style="background-color:#CCCCFF">
                <th>計數</th>
                <th>廣告編號</th>
                <th>廣告標題</th>
                <th>圖片</th>
                <th>狀態</th>
                <th>創建時間</th>
                <th>開始時間</th>
                <th>結束時間</th>
                <th>所屬商店</th>
                <th>修改</th>
                <th>刪除</th>
            </tr>
        </thead>
        <tbody>
            <th:block th:each="adVO : ${adListData}">
                <tr>
                    <td th:text="${adVOStat.count}"></td>
                    <td th:text="${adVO.adId}"></td>
                    <td th:text="${adVO.adTitle}"></td>
                    <td><img th:src="@{/advertisment/DBGifReader} + '?adId=' + ${adVO.adId}" width="100px" /></td>
                    <td th:text="${adVO.adStatus == 1 ? '啟用' : '停用'}"></td> <td th:text="${#dates.format(adVO.adCreatedTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                    <td th:text="${#dates.format(adVO.adStartTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                    <td th:text="${#dates.format(adVO.adEndTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
                    <td th:text="${adVO.storeVO != null ? adVO.storeVO.storeName + ' (' + adVO.storeVO.storeId + ')' : 'N/A'}"></td>

                    <td>
                        <form th:action="@{/advertisment/getOne_For_Update}" method="post">
                            <input type="submit" value="修改" class="btn btn-primary">
                            <input type="hidden" name="adId" th:value="${adVO.adId}" />
                        </form>
                    </td>
                    <td>
                        <form th:action="@{/advertisment/delete}" method="post">
                            <input type="submit" value="刪除" class="btn btn-danger">
                            <input type="hidden" name="adId" th:value="${adVO.adId}" />
                        </form>
                    </td>
                </tr>
            </th:block>
        </tbody>
    </table>

</div>

</body>
</html>